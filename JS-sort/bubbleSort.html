<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // 冒泡排序介绍：
        // 比较相邻元素，如果第一个比第二个大，就交换
        // 一趟后，最后一个元素都是数组中最大的
        // 每一趟排除一个元素，重复操作
        // 时间复杂度：O(n2) 
        // 空间复杂度：O(1) (冒泡排序的临时变量所占空间不随处理数据n的大小改变而改变，则空间复杂度为O(1))
        // 稳定性：稳定
        // 假设数组为：[0,4,1,3,2]
        // 04 14 34 24 0,1,3,2,4 第一趟完成时，数组中最大的已在最后的位置，所以下一趟可以少最后一次比较
        // 01 13 23 第二趟完成时，数组中第二大的已在倒数第二的位置，所以下一趟可以少最后一次比较
        // 01 12 第三趟
        // 01 第四趟
        // END
        // 缺点：即使已经排好序了，还是会执行所有的循环判断
        // 优化：设置标识，当一趟里面没有发生任何交换时则证明已经排好序
        function BubbleSort0(arr) {
            var s0 = 0;
            var s1 = 0;
            var len = arr.length;
            var i = 0;
            var tmp = 0;
            for (i = 0; i < len - 1; i++) { //确定排序趟数
                var j = 0;
                for (j = 0; j < len - 1 - i; j++) { //确定比较次数
                    if (arr[j] > arr[j + 1]) {
                        //交换
                        tmp = arr[j];
                        arr[j] = arr[j + 1];
                        arr[j + 1] = tmp;
                    }
                    s1++;
                }
                s0++;
                // console.log(arr);
            }
            // console.log(s0 + ' - ' + s1);
        }

        function BubbleSort1(arr) {
            var s0 = 0;
            var s1 = 0;
            var len = arr.length;
            var i = 0;
            var tmp = 0;
            var isSort = true;
            for (i = 0; i < len - 1; i++) { //确定排序趟数
                var j = 0;
                isSort = true;
                for (j = 0; j < len - 1 - i; j++) { //确定比较次数
                    if (arr[j] > arr[j + 1]) {
                        //交换
                        tmp = arr[j];
                        arr[j] = arr[j + 1];
                        arr[j + 1] = tmp;
                        isSort = false;
                    }
                    s1++;
                }
                s0++;
                if (isSort) {
                    break;
                }
                // console.log(arr);
            }
            // console.log(s0 + ' - ' + s1);
        }

        var arr0 = [10, -3, 5, 34, -34, 5, 0, 9];
        var beginTime0 = new Date().getTime();
        BubbleSort0(arr0);
        var endTime0 = new Date().getTime();
        console.log(beginTime0);
        console.log(endTime0);
        console.log(endTime0 - beginTime0);
        console.log('--------------------------------');
        var arr1 = [10, -3, 5, 34, -34, 5, 0, 9];
        var beginTime1 = new Date().getTime();
        BubbleSort1(arr1);
        var endTime1 = new Date().getTime();
        console.log(beginTime1);
        console.log(endTime1);
        console.log(endTime1 - beginTime1);
    </script>
</body>

</html>